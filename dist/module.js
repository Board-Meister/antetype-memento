function I({modules:n}){let a=[],o=[],i=e=>{if(e.ctrlKey){if(e.key==="z"){d();return}if(e.key==="y"){m();return}}},c=e=>{let t=[];return e.forEach(r=>{t.push({instance:r,original:n.core.clone.getOriginal(r.layer)})}),t},s=e=>{a.push(c(e)),o=[],a.length>100&&a.shift()},d=async()=>{if(a.length===0)return;let e=a.splice(-1)[0];o.push(e),await n.core.view.recalculate();for(let t of e)await t.instance.undo(t.original,t.instance.data??void 0);n.core.view.redraw()},m=async()=>{if(o.length===0)return;let e=o.splice(-1)[0];a.push(e),await n.core.view.recalculate();for(let t of e)await t.instance.redo(t.original,t.instance.data??void 0);n.core.view.redraw()};return document.addEventListener("keyup",i,!1),{addToStack:s}}export{I as default};
